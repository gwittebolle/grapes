<div class="container">
  <div class="row">
    <div class="col-lg-7 shadow-sm p-5 m-2 mx-auto bg-light">
      <div data-controller="search">
        <div id="container wine-search-container p-2 m-2" class="border-bottom">
          <h5>A la recherche de la perle rare...</h5>
          <input type="text" id="wine-search-input"
            placeholder=<%= Wine.first.name ? Wine.first.name : "Aucun vin disponible" %> class="input-group mb-3"
            data-search-target="search" data-action="input->search#search">
        </div>
        <div class="d-flex justify-content-center">

          <div class="container py-2 m-0 carousel-container">
            <div id="carouselExampleFade" class="carousel slide carousel-fade" data-bs-ride="carousel">
              <div class="carousel-inner">
                <% @wines.each do |wine| %>
                <div class="carousel-item active" data-bs-interval="10000">
                  <%= wine.photo.attached? ? cl_image_tag(wine.photo.key,class:"d-block w-100") : image_tag('wine.png', class:"d-block w-100") %>
                  <div class="carousel-caption d-none d-md-block">
                    <h2 class="text-shadow">First slide label</h2>
                    <p>Some representative placeholder content for the first slide.</p>
                  </div>
                </div>
                <% end %>
              </div>
              <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleFade"
                data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
              </button>
              <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleFade"
                data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
              </button>
            </div>

          </div>
        </div>
      </div>
    </div>




    <div class="col-lg-4 shadow-sm container p-5 m-2 bg-light"
      style="position: -webkit-sticky; position: sticky; top: 0; right: 0; align-self: flex-start;">
      <h3>A découvrir près de chez vous...</h3>
      <div style="width: 100%; height: 600px;" data-controller="map" data-map-markers-value="<%= @markers.to_json %>"
        data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>" class="map">
      </div>
    </div>
  </div>
</div>


<% @wines.reverse.each do |wine| %>
    <%= render partial: "pages/wine_card", locals: {wine: wine} %>
<% end %>
